---
import Layout from '../layouts/Layout.astro';
import MangaCard from '../components/MangaCard.astro';
import { connectDB, closeDB } from '../lib/db';
import type { Manga } from '../types/manga';

// Fetch manga data
const db = await connectDB();
const mangaCollection = db.collection<Manga>('manga');
const allManga = await mangaCollection.find().toArray();
await closeDB();
---

<Layout title="Browse Manga">
  <div class="container mx-auto px-4">
    <h1 class="text-3xl font-bold mb-8 text-gray-900 dark:text-white">Browse Manga</h1>
    
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      {allManga.map((manga) => <MangaCard manga={manga} />)}
    </div>
  </div>
</Layout> 